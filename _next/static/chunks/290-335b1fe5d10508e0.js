(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{7412:(e,s,t)=>{"use strict";t.d(s,{A:()=>v});var a=t(4848),i=t(9028),c=t.n(i),n=t(4335);async function l(){return(await n.A.get("https://api.themoviedb.org/3/authentication/token/new",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}var r=t(6540),o=t(1468),d=t(7235);async function h(e){let s=n.A.request({method:"POST",url:"https://api.themoviedb.org/3/authentication/session/new",headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{request_token:e}});return(await s).data}async function m(e){let s={method:"GET",url:"https://api.themoviedb.org/3/account/21839650?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&session_id=").concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}};return(await n.A.request(s)).data}t(4156);var p=t(2845);function u(){let e=(0,o.wA)();return(0,a.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"Search for a movie...",value:(0,o.d4)(e=>e.searchMovie.searchMovieName),onChange:s=>{e((0,p.Oj)(s.target.value))}})}var j=t(1106),N=t.n(j);function x(e){let{children:s}=e,{session:t}=(0,o.d4)(e=>e.TMDBUser),i=(0,r.useMemo)(()=>t.success?(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(N(),{className:"nav-link",href:"/watch-list",children:"待播清單"})}):(0,a.jsx)(a.Fragment,{}),[t]);return(0,a.jsx)("div",{className:"w-100 sticky-top bg-dark p-1",children:(0,a.jsxs)("div",{className:"row align-items-center",children:[(0,a.jsx)("div",{className:"col-auto",children:(0,a.jsx)(N(),{href:"/",className:"nav-link",children:(0,a.jsx)("h2",{children:"TMDB"})})}),(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("div",{className:"d-flex justify-content-end",children:(0,a.jsxs)("nav",{className:"navbar navbar-expand-lg ",children:[(0,a.jsx)(u,{}),(0,a.jsx)("div",{className:"collapse navbar-collapse",children:(0,a.jsxs)("ul",{className:"navbar-nav",children:[i,(0,a.jsx)("li",{className:"nav-item",children:s})]})})]})})})]})})}function v(){let{profile:e,TMDBAuthUrl:s,isDropdownOpen:t,setDropdownOpen:i,handleLogout:n,WatchListLink:p,isLogin:u}=function(){let e=(0,o.wA)(),{requestToken:s,session:t,profile:i}=(0,o.d4)(e=>e.TMDBUser),[c,n]=(0,r.useState)(!1),[p,u]=(0,r.useState)(""),[j,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t.success&&m(t.session_id).then(s=>{e((0,d.gL)(s))})},[t,e]),(0,r.useEffect)(()=>{if(!t.success){let{protocol:e,host:t,pathname:a}=window.location;u("https://www.themoviedb.org/authenticate/".concat(s.request_token,"?redirect_to=").concat(e,"//").concat(t).concat(a))}},[s,t]),(0,r.useEffect)(()=>{let s=JSON.parse(localStorage.getItem("tmdbSession")||"{}");if(null==s?void 0:s.success)e((0,d.Nq)(s));else{let s=new URLSearchParams(window.location.search),t=s.get("approved"),a=s.get("request_token");"true"===t&&a?h(a).then(s=>e((0,d.Nq)(s))).catch(()=>l().then(s=>e((0,d.dC)(s)))):l().then(s=>e((0,d.dC)(s)))}},[e]),(0,r.useEffect)(()=>{t.success&&i.id&&x(!0)},[t,i]);let v=(0,r.useMemo)(()=>t.success?(0,a.jsx)(N(),{className:"dropdown-item",href:"/watch-list",children:"待播清單"}):null,[t]);return{profile:i,session:t,TMDBAuthUrl:p,isDropdownOpen:c,setDropdownOpen:n,handleLogout:()=>{e((0,d.Nq)(d.Bk)),l().then(s=>e((0,d.dC)(s)))},WatchListLink:v,isLogin:j}}();return(0,a.jsx)(x,{children:u?(0,a.jsxs)("div",{className:"dropdown",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:c().avatar,onClick:()=>i(!t),children:(0,a.jsx)("h3",{children:e.username[0]})}),(0,a.jsx)("div",{className:"dropdown-toggle"})]}),(0,a.jsxs)("div",{className:"dropdown-menu ".concat(t?"show":""),style:{right:0},children:[(0,a.jsx)("button",{className:"dropdown-item",onClick:n,children:"Log Out"}),p]})]}):(0,a.jsx)(N(),{className:"btn btn-primary",href:s,children:"Login"})})}},8341:(e,s,t)=>{"use strict";t.d(s,{A:()=>m});var a=t(4848),i=t(7909),c=t(9965),n=t.n(c),l=t(6540),r=t(1468),o=t(2845),d=t(4335);async function h(e){return(await d.A.request({method:"GET",url:"https://api.themoviedb.org/3/movie/".concat(e,"/credits?language=en-US"),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}let m=function(e){let{movie:s,isWatchList:t}=e,{profile:c,session:d}=(0,r.d4)(e=>e.TMDBUser),{activeMovie:m}=(0,r.d4)(e=>e.searchMovie),p=(0,r.wA)(),u=e=>{p((0,o.dJ)(e)),p((0,o.Fb)(!0)),h(e.id).then(e=>p((0,o.xE)(e)))},j=(0,l.useMemo)(()=>c.id&&d.success&&m.id?t?(0,a.jsx)("button",{className:"btn btn--primary",children:"已加入清單"}):(0,a.jsx)("button",{className:"btn btn--primary",onClick:()=>{(0,i.A)(c.id,d.session_id,m.id)},children:"Add to watch List"}):(0,a.jsx)(a.Fragment,{}),[c,d,m,t]),N=s.poster_path?"https://image.tmdb.org/t/p/w500".concat(s.poster_path,"/"):"https://www.themoviedb.org/assets/2/v4/glyphicons/basic/glyphicons-basic-38-picture-grey-c2ebdbb057f2a7614185931650f8cee23fa137b93812ccb132b9df511df1cfac.svg";return(0,a.jsx)("div",{className:"col-lg-4 col-sm-6 mb-3",children:(0,a.jsxs)("div",{className:"card border border-secondary",onClick:()=>{u(s)},children:[(0,a.jsx)(n(),{src:N,width:0,height:0,sizes:"100vw",style:{width:"100%",height:"300px",objectFit:"cover"},className:"card-img-top",alt:"Waves"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title text-truncate",children:s.title}),(0,a.jsx)("span",{className:"text-secondary",children:s.release_date||"查無日期"}),(0,a.jsx)("div",{className:"w-100",children:j})]})]})},s.id)}},758:(e,s,t)=>{"use strict";t.d(s,{A:()=>p});var a=t(4848),i=t(7909),c=t(2894),n=t.n(c),l=t(2845),r=t(9965),o=t.n(r),d=t(6715),h=t(6540),m=t(1468);function p(){let e=(0,m.wA)(),{pathname:s}=(0,d.useRouter)(),{profile:t,session:c}=(0,m.d4)(e=>e.TMDBUser),{showMovieDetail:r,movieCredits:p,activeMovie:u}=(0,m.d4)(e=>e.searchMovie),[j,N]=(0,h.useState)("https://www.themoviedb.org/assets/2/v4/glyphicons/basic/glyphicons-basic-38-picture-grey-c2ebdbb057f2a7614185931650f8cee23fa137b93812ccb132b9df511df1cfac.svg"),x=(0,h.useMemo)(()=>t.id&&c.success&&u.id?"/watch-list"==s?(0,a.jsx)("button",{className:"btn btn--primary",children:"已加入清單"}):(0,a.jsx)("button",{className:"btn btn--primary",onClick:e=>{(0,i.A)(t.id,c.session_id,u.id).then(s=>{s.success&&(e.target.innerHTML='<a href="/TMDB/watch-list">前往查看待播放清單</a>')})},children:"Add to watch List"}):(0,a.jsx)(a.Fragment,{}),[t,c,u,s]),v=(0,h.useMemo)(()=>p.cast.length>0?(0,a.jsx)("div",{style:{display:"flex",width:"300px",overflowX:"auto"},children:p.cast.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"border",style:{width:"150px"},children:[(0,a.jsx)(o(),{src:"https://media.themoviedb.org/t/p/w276_and_h350_face".concat(e.profile_path),width:0,loading:"lazy",height:0,sizes:"100vw",style:{width:"150px",height:"150px",objectFit:"cover"},className:"card-img-top",alt:"Waves"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title text-truncate",children:e.original_name}),(0,a.jsx)("span",{className:"text-secondary",children:e.character})]})]},e.cast_id))}):null,[p]);return((0,h.useEffect)(()=>{N("https://image.tmdb.org/t/p/w500".concat(u.poster_path))},[u]),u&&r&&p)?(0,a.jsx)("div",{className:n().popupOverlay,children:(0,a.jsxs)("div",{className:n().popup,children:[(0,a.jsx)("div",{className:"w-100 d-flex justify-content-end mb-1 cursor-pointer",style:{position:"fixed",height:"100vh",right:"1rem",top:"1rem"},onClick:()=>e((0,l.Fb)(!1)),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"currentColor",className:"bi bi-x-lg",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"})})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"row m-0",children:[(0,a.jsx)("div",{className:"col-lg-4 p-3 d-flex justify-content-center align-items-center bg-light",children:(0,a.jsx)(o(),{src:j,width:0,height:0,sizes:"100vw",style:{width:"auto",height:"auto",maxWidth:"100%",maxHeight:"500px"},className:"card-img-top",alt:"Waves"})}),(0,a.jsx)("div",{className:"col d-flex justify-content-center align-items-start",children:(0,a.jsxs)("div",{className:"w-100 p-3 text-start",children:[(0,a.jsx)("h3",{children:u.title}),(0,a.jsx)("p",{children:u.overview}),(0,a.jsx)("span",{className:"text-secondary",children:u.release_date||"查無日期"}),v,(0,a.jsx)("div",{className:"w-100 mt-1",children:x})]})})]})})]})}):(0,a.jsx)(a.Fragment,{})}},3886:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(4848);t(6540);var i=t(2845),c=t(1468);function n(){let e=(0,c.wA)();return(0,a.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{e((0,i.OA)("asc")),window.scrollTo(0,0)},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-sort-alpha-down",viewBox:"0 0 16 16",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z"}),(0,a.jsx)("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}),(0,a.jsx)("span",{className:"visually-hidden",children:"Button"})]})}function l(){let e=(0,c.wA)();return(0,a.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{e((0,i.OA)("desc")),window.scrollTo(0,0)},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-sort-alpha-down-alt",viewBox:"0 0 16 16",children:[(0,a.jsx)("path",{d:"M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M10.082 12.629 9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371zm1.57-.785L11 9.688h-.047l-.652 2.156z"}),(0,a.jsx)("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}),(0,a.jsx)("span",{className:"visually-hidden",children:"Button"})]})}function r(){return(0,a.jsx)("div",{className:"position-fixed",style:{bottom:"2rem",right:"1rem"},children:(0,a.jsxs)("div",{className:"btn-group",children:[(0,a.jsx)(n,{}),(0,a.jsx)(l,{})]})})}function o(e){let{children:s}=e;return(0,a.jsxs)("div",{children:[s,(0,a.jsx)(r,{})]})}},7909:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(4335);async function i(e,s,t){let i={method:"POST",url:"https://api.themoviedb.org/3/account/".concat(e,"/watchlist?session_id=").concat(s),headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{media_type:"movie",media_id:t,watchlist:!0}};return(await a.A.request(i)).data}},9028:e=>{e.exports={avatar:"LoginButton_avatar__M7Ag9"}},2894:e=>{e.exports={popupOverlay:"MovieCardPopUp_popupOverlay__2T4It",popup:"MovieCardPopUp_popup__0TlMZ"}},4156:e=>{e.exports={"form-control":"SearchMovieBar_form-control__W2Slc"}}}]);