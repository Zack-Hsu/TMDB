(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3200)}])},3200:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var n=s(4848),i=s(6540),a=s(3886),l=s(1468),r=s(7412),o=s(8341),c=s(4335);async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await c.A.get(s)).data}var u=s(2845);async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await c.A.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/day?language=en-US&page=".concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}var m=s(758);function v(){let{fetchMovieLoader:e}=(0,l.d4)(e=>e.searchMovie);return e?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{position:"fixed",bottom:"10%",left:"50%",zIndex:"10011",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)("div",{className:"spinner-border",role:"status"}),(0,n.jsx)("span",{className:"sr-only w-100",children:"Loading..."})]})}):null}function p(){var e;let{searchMovieName:t,searchResult:s}=(0,l.d4)(e=>e.searchMovie),c=(0,l.wA)();(0,i.useEffect)(()=>{let e=function(e){let t;let s=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10,n=()=>{t&&clearTimeout(t),t=setTimeout(()=>{s()&&(e(),i())},500)},i=()=>{window.removeEventListener("scroll",n)};return window.addEventListener("scroll",n),i}(()=>{c((0,u.Uf)(!0)),""==t?h(s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,c((0,u.Cp)(e))}):d(t,s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,c((0,u.Cp)(e))})});return()=>{e()}},[s]),(0,i.useEffect)(()=>{window.scrollTo(0,0),""!==t?d(t,1).then(e=>{c((0,u.Cp)(e))}):h(1).then(e=>{c((0,u.Cp)(e))})},[t,c]),(0,i.useEffect)(()=>{h().then(e=>c((0,u.Cp)(e)))},[c]);let p=(0,i.useMemo)(()=>t?(0,n.jsx)("h3",{children:"搜尋結果"}):(0,n.jsx)("h3",{children:"推薦電影"}),[t]);return(0,n.jsx)(a.A,{children:(0,n.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,n.jsx)(r.A,{}),p,(0,n.jsx)("div",{className:"row mt-3",children:null==s?void 0:null===(e=s.results)||void 0===e?void 0:e.map(e=>(0,n.jsx)(o.A,{movie:e},e.id))}),(0,n.jsx)(m.A,{}),(0,n.jsx)(v,{}),(0,n.jsxs)("div",{className:"",children:["Current Page:",null==s?void 0:s.page]}),(0,n.jsxs)("div",{className:"",children:["Total Pages:",null==s?void 0:s.total_pages]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[650,290,636,593,792],()=>t(2022)),_N_E=e.O()}]);