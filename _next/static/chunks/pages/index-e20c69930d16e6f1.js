(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1748)}])},1748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(4848),n=s(6540),r=s(9101),l=s(1468),i=s(8341),o=s(4335);async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await o.A.get(s)).data}var d=s(2845);async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await o.A.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/day?language=en-US&page=".concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}var h=s(758);function m(e){return e.loaderReduxState?(0,a.jsxs)("div",{className:"loadding",children:[(0,a.jsx)("div",{className:"spinner-border",role:"status"}),(0,a.jsx)("span",{className:"sr-only w-100 text-center",children:"Loading..."})]}):null}function v(){let e=(0,l.wA)();return(0,a.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"搜尋電影 （建議使用英文）",value:(0,l.d4)(e=>e.searchMovie.searchMovieName),onChange:t=>{e((0,d.Oj)(t.target.value))}})}function p(){var e;let{searchMovieName:t,searchResult:s,fetchMovieLoader:o}=(0,l.d4)(e=>e.searchMovie),p=(0,l.wA)();(0,n.useEffect)(()=>{let e=function(e){let t;let s=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10,a=()=>{t&&clearTimeout(t),t=setTimeout(()=>{s()&&(e(),n())},500)},n=()=>{window.removeEventListener("scroll",a)};return window.addEventListener("scroll",a),n}(()=>{p((0,d.Uf)(!0)),""==t?u(s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,p((0,d.Cp)(e))}):c(t,s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,p((0,d.Cp)(e))})});return()=>{e()}},[s]),(0,n.useEffect)(()=>{window.scrollTo(0,0),""!==t?c(t,1).then(e=>{p((0,d.Cp)(e))}):u(1).then(e=>{p((0,d.Cp)(e))})},[t,p]),(0,n.useEffect)(()=>{u().then(e=>p((0,d.Cp)(e)))},[p]);let N=(0,n.useMemo)(()=>t?(0,a.jsx)("h3",{className:"py-3",children:"搜尋結果"}):(0,a.jsx)("h3",{className:"py-3",children:"推薦電影"}),[t]);return(0,a.jsx)(r.A,{children:(0,a.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,a.jsx)("div",{className:"w-100 py-3 d-flex justify-content-center",children:(0,a.jsx)(v,{})}),N,(0,a.jsx)("div",{className:"row mt-3",children:null==s?void 0:null===(e=s.results)||void 0===e?void 0:e.map(e=>(0,a.jsx)(i.A,{movie:e},e.id))}),(0,a.jsx)(h.A,{}),(0,a.jsx)(m,{loaderReduxState:o}),(0,a.jsxs)("div",{className:"",children:["Current Page:",null==s?void 0:s.page]}),(0,a.jsxs)("div",{className:"",children:["Total Pages:",null==s?void 0:s.total_pages]})]})})}s(4156)},4156:e=>{e.exports={"form-control":"SearchMovieBar_form-control__W2Slc"}}},e=>{var t=t=>e(e.s=t);e.O(0,[650,510,636,593,792],()=>t(2022)),_N_E=e.O()}]);