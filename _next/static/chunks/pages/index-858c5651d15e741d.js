(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1748)}])},1748:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(4848),s=n(6540),r=n(9428),c=n(1468),o=n(4335);async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await o.A.get(n)).data}var l=n(2845);async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await o.A.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/day?language=en-US&page=".concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}function u(e){return e.loaderReduxState?(0,a.jsxs)("div",{className:"loadding",children:[(0,a.jsx)("div",{className:"spinner-border",role:"status"}),(0,a.jsx)("span",{className:"sr-only w-100 text-center",children:"Loading..."})]}):null}function h(){let e=(0,c.wA)();return(0,a.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"搜尋電影 （建議使用英文）",value:(0,c.d4)(e=>e.searchMovie.searchMovieName),onChange:t=>{e((0,l.Oj)(t.target.value))}})}n(4156);var m=n(6160);function p(){let{searchMovieName:e,searchResult:t,fetchMovieLoader:n}=(0,c.d4)(e=>e.searchMovie),o=(0,c.wA)();(0,s.useEffect)(()=>{let n=function(e){let t;let n=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10,a=()=>{t&&clearTimeout(t),t=setTimeout(()=>{n()&&(e(),s())},500)},s=()=>{window.removeEventListener("scroll",a)};return window.addEventListener("scroll",a),s}(()=>{o((0,l.Uf)(!0)),""==e?d(t.page+1).then(e=>{let n=[...t.results,...e.results];e.results=n,o((0,l.Cp)(e))}):i(e,t.page+1).then(e=>{let n=[...t.results,...e.results];e.results=n,o((0,l.Cp)(e))})});return()=>{n()}},[t]),(0,s.useEffect)(()=>{window.scrollTo(0,0),""!==e?i(e,1).then(e=>{o((0,l.Cp)(e))}):d(1).then(e=>{o((0,l.Cp)(e))})},[e,o]),(0,s.useEffect)(()=>{d().then(e=>o((0,l.Cp)(e)))},[o]);let p=(0,s.useMemo)(()=>e?(0,a.jsx)("h3",{className:"py-3 text-center",children:"搜尋結果"}):(0,a.jsx)("h3",{className:"py-3 text-center",children:"推薦電影"}),[e]);return(0,a.jsx)(r.A,{children:(0,a.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,a.jsx)("div",{className:"w-100 py-3 d-flex justify-content-center",children:(0,a.jsx)(h,{})}),p,(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(m.A,{})}),(0,a.jsx)(u,{loaderReduxState:n})]})})}},4156:e=>{e.exports={"form-control":"SearchMovieBar_form-control__W2Slc"}}},e=>{var t=t=>e(e.s=t);e.O(0,[650,453,636,593,792],()=>t(2022)),_N_E=e.O()}]);