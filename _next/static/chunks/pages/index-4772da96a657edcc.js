(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6435)}])},6435:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(4848),r=n(6540),c=n(9428),o=n(1468),i=n(4335);async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await i.A.get(n)).data}var l=n(2845);async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await i.A.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/day?language=en-US&page=".concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}function h(){let e=(0,o.wA)();return(0,a.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"搜尋電影 （建議使用英文）",value:(0,o.d4)(e=>e.searchMovie.searchMovieName),onChange:t=>{e((0,l.Oj)(t.target.value))}})}n(4156);var u=n(5011);function f(){let{searchMovieName:e,searchResult:t}=(0,o.d4)(e=>e.searchMovie),n=(0,o.wA)();(0,r.useEffect)(()=>{if(t.page>=t.total_pages)return;let a=function(e){let t;let n=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10,a=()=>{t&&clearTimeout(t),t=setTimeout(()=>{n()&&(e(),r())},500)},r=()=>{window.removeEventListener("scroll",a)};return window.addEventListener("scroll",a),r}(()=>{n((0,l.Uf)(!0)),""==e?d(t.page+1).then(e=>n((0,l.ln)(e))):s(e,t.page+1).then(e=>n((0,l.ln)(e)))});return()=>{a()}},[t]),(0,r.useEffect)(()=>{window.scrollTo(0,0),""!==e?s(e,1).then(e=>{n((0,l.Cp)(e))}):d(1).then(e=>{n((0,l.Cp)(e))})},[e,n]),(0,r.useEffect)(()=>{d().then(e=>n((0,l.Cp)(e)))},[n]);let i=(0,r.useMemo)(()=>e?(0,a.jsx)("h3",{className:"py-3 text-center",children:"搜尋結果"}):(0,a.jsx)("h3",{className:"py-3 text-center",children:"推薦電影"}),[e]);return(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,a.jsx)("div",{className:"w-100 py-3 d-flex justify-content-center",children:(0,a.jsx)(h,{})}),i,(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(u.A,{})})]})})}},4156:e=>{e.exports={"form-control":"SearchMovieBar_form-control__W2Slc"}}},e=>{var t=t=>e(e.s=t);e.O(0,[650,110,636,593,792],()=>t(2022)),_N_E=e.O()}]);