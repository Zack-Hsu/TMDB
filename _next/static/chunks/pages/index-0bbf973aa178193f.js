(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1238)}])},1238:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var l=s(4848),n=s(6540),a=s(5133),i=s(1468),o=s(7412),r=s(8341),d=s(4335);async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await d.A.get(s)).data}var h=s(2957);async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(await d.A.request({method:"GET",url:"https://api.themoviedb.org/3/trending/movie/day?language=en-US&page=".concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}function v(){let e=(0,i.wA)();return(0,l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>e((0,h.OA)("asc")),children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-sort-alpha-down",viewBox:"0 0 16 16",children:[(0,l.jsx)("path",{fillRule:"evenodd",d:"M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z"}),(0,l.jsx)("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}),(0,l.jsx)("span",{className:"visually-hidden",children:"Button"})]})}function p(){let e=(0,i.wA)();return(0,l.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>e((0,h.OA)("desc")),children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-sort-alpha-down-alt",viewBox:"0 0 16 16",children:[(0,l.jsx)("path",{d:"M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645z"}),(0,l.jsx)("path",{fillRule:"evenodd",d:"M10.082 12.629 9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371zm1.57-.785L11 9.688h-.047l-.652 2.156z"}),(0,l.jsx)("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}),(0,l.jsx)("span",{className:"visually-hidden",children:"Button"})]})}function w(){return(0,l.jsxs)("div",{className:"btn-group",children:[(0,l.jsx)(v,{}),(0,l.jsx)(p,{})]})}var j=s(758);function m(){var e;let{searchMovieName:t,searchResult:s}=(0,i.d4)(e=>e.searchMovie),d=(0,i.wA)();(0,n.useEffect)(()=>{let e=function(e){let t;let s=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10,l=()=>{t&&clearTimeout(t),t=setTimeout(()=>{s()&&(e(),n())},500)},n=()=>{window.removeEventListener("scroll",l)};return window.addEventListener("scroll",l),n}(()=>{""==t?u(s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,d((0,h.Cp)(e))}):c(t,s.page+1).then(e=>{let t=[...s.results,...e.results];e.results=t,d((0,h.Cp)(e))})});return()=>{e()}},[s]),(0,n.useEffect)(()=>{window.scrollTo(0,0),""!==t?c(t,1).then(e=>{d((0,h.Cp)(e))}):u(1).then(e=>{d((0,h.Cp)(e))})},[t,d]),(0,n.useEffect)(()=>{u().then(e=>d((0,h.Cp)(e)))},[d]);let v=(0,n.useMemo)(()=>t?(0,l.jsx)("h3",{children:"搜尋結果"}):(0,l.jsx)("h3",{children:"推薦電影"}),[t]);return(0,l.jsx)(a.A,{children:(0,l.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,l.jsx)(o.A,{}),v,(0,l.jsx)("div",{className:"w-100 d-flex flex-wrap justify-content-end fixed-bottom",children:(0,l.jsx)(w,{})}),(0,l.jsx)("div",{className:"row mt-3",children:null==s?void 0:null===(e=s.results)||void 0===e?void 0:e.map(e=>(0,l.jsx)(r.A,{movie:e},e.id))}),(0,l.jsx)(j.A,{}),(0,l.jsxs)("div",{className:"",children:["Current Page:",null==s?void 0:s.page]}),(0,l.jsxs)("div",{className:"",children:["Total Pages:",null==s?void 0:s.total_pages]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[650,937,636,593,792],()=>t(2022)),_N_E=e.O()}]);