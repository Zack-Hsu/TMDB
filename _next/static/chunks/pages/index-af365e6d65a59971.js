(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7973)}])},7973:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(4848),i=a(6540),c=a(4335),n=a(3368),o=a.n(n);function l(e){let{children:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH",crossOrigin:"anonymous"})}),(0,s.jsx)("div",{"data-bs-theme":"dark",children:t})]})}var r=a(9965),h=a.n(r);let d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="https://api.themoviedb.org/3/search/movie?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&query=").concat(e,"&page=").concat(t);return(await c.A.get(a)).data},u=async()=>await c.A.get("https://api.themoviedb.org/3/authentication/token/new",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}}),m=async e=>c.A.request({method:"POST",url:"https://api.themoviedb.org/3/authentication/session/new",headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{request_token:e}}),p=async e=>{let t={method:"GET",url:"https://api.themoviedb.org/3/account/21839650?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&session_id=").concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}};return c.A.request(t)},N=e=>{location.href="https://www.themoviedb.org/authenticate/".concat(e,"?redirect_to=http://localhost:3000/#approved")},j=async(e,t,a)=>{let s={method:"POST",url:"https://api.themoviedb.org/3/account/".concat(e,"/watchlist?session_id=").concat(t),headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{media_type:"movie",media_id:a,watchlist:!0}};c.A.request(s)};function I(){var e;let[t,a]=(0,i.useState)(""),[c,n]=(0,i.useState)(),[o,r]=(0,i.useState)(),[I,v]=(0,i.useState)({success:!1,session_id:""}),[J,_]=(0,i.useState)(null);return(0,i.useEffect)(()=>{d(t).then(e=>r(e))},[t]),(0,i.useEffect)(()=>{I.success&&p(I.session_id).then(e=>_(e.data)).catch(e=>{_(null),console.log(e)})},[I]),(0,i.useEffect)(()=>{var e;(null==o?void 0:null===(e=o.results)||void 0===e?void 0:e.length)&&function(e){let t;let a=()=>window.innerHeight+window.scrollY>=document.body.offsetHeight-10;window.addEventListener("scroll",()=>{t&&clearTimeout(t),t=setTimeout(()=>{a()&&e()},200)})}(()=>{d(t,o.page+1).then(e=>{let t=[...o.results,...e.results];e.results=t,r(e)})})},[o,t]),(0,i.useEffect)(()=>{d(t).then(e=>r(e)),u().then(e=>n(e.data));let e=new URLSearchParams(location.search).get("approved"),a=new URLSearchParams(location.search).get("request_token");e&&a&&(n({request_token:a,expires_at:null==c?void 0:c.expires_at,success:!0}),m(a).then(e=>v(e.data)).catch(e=>{v({success:!1,session_id:""}),console.log(e)}))},[]),(0,s.jsx)(l,{children:(0,s.jsxs)("div",{className:"container","data-bs-theme":"dark",children:[(0,s.jsxs)("button",{onClick:()=>{N(null==c?void 0:c.request_token)},children:["Login - ",null==J?void 0:J.username]}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Search for a movie...",value:t,onChange:e=>a(e.target.value)}),(0,s.jsx)("div",{className:"row",children:null==o?void 0:null===(e=o.results)||void 0===e?void 0:e.map(e=>{let t="https://image.tmdb.org/t/p/w500".concat(e.poster_path);return(0,s.jsx)("div",{className:"col-lg-4 col-sm-6 mb-3",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)(h(),{src:t,width:0,height:0,sizes:"100vw",style:{width:"100%",height:"300px",objectFit:"cover"},className:"card-img-top",alt:"Waves"}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h5",{className:"card-title",children:e.title}),(0,s.jsx)("p",{className:"card-text text-truncate",children:e.overview}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{J&&j(J.id,I.session_id,e.id)},children:"add to favorite"})]})]})},e.id)})}),(0,s.jsxs)("div",{className:"",children:["Current Page:",null==o?void 0:o.page]}),(0,s.jsxs)("div",{className:"",children:["Total Pages:",null==o?void 0:o.total_pages]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[824,636,593,792],()=>t(2022)),_N_E=e.O()}]);