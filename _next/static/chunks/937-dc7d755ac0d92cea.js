(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{7412:(e,s,t)=>{"use strict";t.d(s,{A:()=>v});var a=t(4848),c=t(9028),i=t.n(c),n=t(4335);async function r(){return(await n.A.get("https://api.themoviedb.org/3/authentication/token/new",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}var l=t(6540),o=t(1468),d=t(7235);async function h(e){let s=n.A.request({method:"POST",url:"https://api.themoviedb.org/3/authentication/session/new",headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{request_token:e}});return(await s).data}async function m(e){let s={method:"GET",url:"https://api.themoviedb.org/3/account/21839650?api_key=".concat("367a786553f6d6acd23b37641e73be0b","&session_id=").concat(e),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}};return(await n.A.request(s)).data}t(4156);var j=t(2957);function N(){let e=(0,o.wA)();return(0,a.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"Search for a movie...",value:(0,o.d4)(e=>e.searchMovie.searchMovieName),onChange:s=>{e((0,j.Oj)(s.target.value))}})}var p=t(1106),u=t.n(p);function x(e){let{children:s}=e,{session:t}=(0,o.d4)(e=>e.TMDBUser),c=(0,l.useMemo)(()=>t.success?(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsx)(u(),{className:"nav-link",href:"/watch-list",children:"待播清單"})}):(0,a.jsx)(a.Fragment,{}),[t]);return(0,a.jsx)("div",{className:"w-100 sticky-top bg-dark p-1",children:(0,a.jsxs)("div",{className:"row align-items-center",children:[(0,a.jsx)("div",{className:"col-auto",children:(0,a.jsx)(u(),{href:"/",className:"nav-link",children:(0,a.jsx)("h2",{children:"TMDB"})})}),(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("div",{className:"d-flex justify-content-end",children:(0,a.jsxs)("nav",{className:"navbar navbar-expand-lg ",children:[(0,a.jsx)(N,{}),(0,a.jsx)("div",{className:"collapse navbar-collapse",children:(0,a.jsxs)("ul",{className:"navbar-nav",children:[c,(0,a.jsx)("li",{className:"nav-item",children:s})]})})]})})})]})})}function v(){let e=(0,o.wA)(),{requestToken:s,session:t,profile:c}=(0,o.d4)(e=>e.TMDBUser),[n,j]=(0,l.useState)("https://www.themoviedb.org/authenticate/".concat(s.request_token,"?redirect_to=https://localhost:3000"));(0,l.useEffect)(()=>{t.success&&m(t.session_id).then(s=>{e((0,d.gL)(s))})},[t,e]),(0,l.useEffect)(()=>{if(location&&!t.success){let{protocol:e,pathname:t,host:a}=location;j("https://www.themoviedb.org/authenticate/".concat(s.request_token,"?redirect_to=").concat(e,"//").concat(a).concat(t))}},[s,t]),(0,l.useEffect)(()=>{let s={success:!1,session_id:""};if(localStorage.getItem("tmdbSession")&&(s=JSON.parse(localStorage.getItem("tmdbSession"))),s.success)e((0,d.Nq)(s));else{let t=new URLSearchParams(location.search).get("approved"),a=new URLSearchParams(location.search).get("request_token");"true"==t&&a?s.success||h(a).then(s=>e((0,d.Nq)(s))).catch(()=>{r().then(s=>e((0,d.dC)(s)))}):r().then(s=>e((0,d.dC)(s)))}},[e]);let N=(0,l.useMemo)(()=>c.id&&t.success?(0,a.jsx)("div",{className:i().avatar,children:(0,a.jsx)("h3",{children:c.username[0]})}):(0,a.jsx)("a",{className:"btn btn-primary",href:n,children:"Login"}),[c,t,n]);return(0,a.jsx)(x,{children:N})}},8341:(e,s,t)=>{"use strict";t.d(s,{A:()=>m});var a=t(4848),c=t(7909),i=t(9965),n=t.n(i),r=t(6540),l=t(1468),o=t(2957),d=t(4335);async function h(e){return(await d.A.request({method:"GET",url:"https://api.themoviedb.org/3/movie/".concat(e,"/credits?language=en-US"),headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"}})).data}let m=function(e){let{movie:s,fullImageUrl:t,isWatchList:i}=e,{profile:d,session:m}=(0,l.d4)(e=>e.TMDBUser),{activeMovie:j}=(0,l.d4)(e=>e.searchMovie),N=(0,l.wA)(),p=e=>{N((0,o.dJ)(e)),N((0,o.Fb)(!0)),h(e.id).then(e=>N((0,o.xE)(e)))},u=(0,r.useMemo)(()=>d.id&&m.success&&j.id?i?(0,a.jsx)("button",{className:"btn btn--primary",children:"已加入清單"}):(0,a.jsx)("button",{className:"btn btn--primary",onClick:()=>{(0,c.A)(d.id,m.session_id,j.id)},children:"Add to watch List"}):(0,a.jsx)(a.Fragment,{}),[d,m,j,i]);return(0,a.jsx)("div",{className:"col-lg-4 col-sm-6 mb-3",children:(0,a.jsxs)("div",{className:"card border border-secondary",onClick:()=>{p(s)},children:[(0,a.jsx)(n(),{src:t,width:0,height:0,sizes:"100vw",style:{width:"100%",height:"300px",objectFit:"cover"},className:"card-img-top",alt:"Waves"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title text-truncate",children:s.title}),(0,a.jsx)("span",{className:"text-secondary",children:s.release_date||"查無日期"}),(0,a.jsx)("div",{className:"w-100",children:u})]})]})},s.id)}},758:(e,s,t)=>{"use strict";t.d(s,{A:()=>j});var a=t(4848),c=t(7909),i=t(5780),n=t.n(i),r=t(2957),l=t(9965),o=t.n(l),d=t(6715),h=t(6540),m=t(1468);function j(){let e=(0,m.wA)(),{pathname:s}=(0,d.useRouter)(),{profile:t,session:i}=(0,m.d4)(e=>e.TMDBUser),{showMovieDetail:l,movieCredits:j,activeMovie:N}=(0,m.d4)(e=>e.searchMovie),[p,u]=(0,h.useState)("https://www.themoviedb.org/assets/2/v4/glyphicons/basic/glyphicons-basic-38-picture-grey-c2ebdbb057f2a7614185931650f8cee23fa137b93812ccb132b9df511df1cfac.svg"),x=(0,h.useMemo)(()=>t.id&&i.success&&N.id?"/watch-list"==s?(0,a.jsx)("button",{className:"btn btn--primary",children:"已加入清單"}):(0,a.jsx)("button",{className:"btn btn--primary",onClick:()=>{(0,c.A)(t.id,i.session_id,N.id)},children:"Add to watch List"}):(0,a.jsx)(a.Fragment,{}),[t,i,N,s]),v=(0,h.useMemo)(()=>j.cast.length>0?(0,a.jsx)("div",{style:{display:"flex",width:"300px",overflowX:"auto"},children:j.cast.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"border",style:{width:"150px"},children:[(0,a.jsx)(o(),{src:"https://media.themoviedb.org/t/p/w276_and_h350_face".concat(e.profile_path),width:0,height:0,sizes:"100vw",style:{width:"150px",height:"150px",objectFit:"cover"},className:"card-img-top",alt:"Waves"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title text-truncate",children:e.original_name}),(0,a.jsx)("span",{className:"text-secondary",children:e.character})]})]},e.cast_id))}):null,[j]);return((0,h.useEffect)(()=>{u("https://image.tmdb.org/t/p/w500".concat(N.poster_path))},[N]),N&&l&&j)?(0,a.jsx)("div",{className:n().popupOverlay,children:(0,a.jsxs)("div",{className:n().popup,children:[(0,a.jsx)("div",{className:"w-100 d-flex justify-content-end mb-1 cursor-pointer",onClick:()=>e((0,r.Fb)(!1)),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"currentColor",className:"bi bi-x-lg",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"})})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"row m-0",children:[(0,a.jsx)("div",{className:"col-lg-4 p-3 d-flex justify-content-center align-items-center bg-light",children:(0,a.jsx)(o(),{src:p,width:0,height:0,style:{width:"auto",height:"auto",maxWidth:"100%",maxHeight:"500px"},className:"card-img-top",alt:"Waves"})}),(0,a.jsx)("div",{className:"col d-flex justify-content-center align-items-start",children:(0,a.jsxs)("div",{className:"w-100 p-3 text-start",children:[(0,a.jsx)("h3",{children:N.title}),(0,a.jsx)("p",{children:N.overview}),(0,a.jsx)("span",{className:"text-secondary",children:N.release_date||"查無日期"}),v,(0,a.jsx)("div",{className:"w-100 mt-1",children:x})]})})]})})]})}):(0,a.jsx)(a.Fragment,{})}},5133:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(4848);function c(e){let{children:s}=e;return(0,a.jsx)("div",{children:s})}t(6540)},7909:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(4335);async function c(e,s,t){let c={method:"POST",url:"https://api.themoviedb.org/3/account/".concat(e,"/watchlist?session_id=").concat(s),headers:{accept:"application/json","content-type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNjdhNzg2NTUzZjZkNmFjZDIzYjM3NjQxZTczYmUwYiIsIm5iZiI6MTc0MDM2NzE1MC4yNTUsInN1YiI6IjY3YmJlNTJkYmQ0OGU4OTI0Y2JlZTVhYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Xa3Po7q0eXaQe4jofc07HDfFxkv_k_pDe9FS_RbNNhM"},data:{media_type:"movie",media_id:t,watchlist:!0}};return a.A.request(c)}},9028:e=>{e.exports={avatar:"LoginButton_avatar__M7Ag9"}},5780:e=>{e.exports={popupOverlay:"MovieCard_popupOverlay__YMaBY",popup:"MovieCard_popup__mfObJ"}},4156:e=>{e.exports={"form-control":"SearchMovieBar_form-control__W2Slc"}}}]);